<% content_for(:page_title, "Manage Badges") %>

<div class="flex justify-between items-center mb-6">
  <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Manage Badges</h1>
  <%= link_to "Create New Badge", new_admin_badge_path, class: "px-4 py-2 text-sm text-white bg-indigo-600 dark:bg-indigo-700 rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600" %>
</div>

<div class="bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden">
  <ul class="divide-y divide-gray-200 dark:divide-gray-700">
    <% @badges.each do |badge| %>
      <li class="p-4 hover:bg-gray-50 dark:hover:bg-gray-700">
        <div class="flex items-center space-x-4">
          <div class="flex-shrink-0">
            <%= image_tag "#{badge.icon_name}.svg",
                class: "h-12 w-12",
                onerror: "this.src='https://placehold.co/48x48/F9E5A7/8B4513?text=B'" %>
          </div>
          <div class="flex-1">
            <p class="text-sm font-semibold text-gray-900 dark:text-gray-100"><%= badge.name %></p>
            <p class="text-sm text-gray-500 dark:text-gray-400"><%= badge.description %></p>
            <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">Icon Name: <code class="dark:text-gray-300"><%= badge.icon_name %>.svg</code></p>
          </div>
          <div class="flex items-center space-x-6">
            <div class="text-right">
              <p class="text-lg font-bold text-gray-900 dark:text-gray-100"><%= badge.users.count %></p>
              <p class="text-sm text-gray-500 dark:text-gray-400">Users</p>
            </div>
            <div class="flex space-x-2">
              <%= link_to "Edit", edit_admin_badge_path(badge), class: "text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300" %>
              <%= button_to "Delete", admin_badge_path(badge),
                  method: :delete,
                  data: { turbo_confirm: "Are you sure? This only works if no users have this badge." },
                  class: "text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300" %>
            </div>
          </div>
        </div>
      </li>
    <% end %>
  </ul>
</div>
